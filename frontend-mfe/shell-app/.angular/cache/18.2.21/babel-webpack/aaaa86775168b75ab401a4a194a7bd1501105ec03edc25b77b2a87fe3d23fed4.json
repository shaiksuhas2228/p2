{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core/services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction VerifyOtpComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 14);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nfunction VerifyOtpComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.successMessage);\n  }\n}\nfunction VerifyOtpComponent_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 16);\n  }\n}\nexport let VerifyOtpComponent = /*#__PURE__*/(() => {\n  class VerifyOtpComponent {\n    constructor(authService, router, route) {\n      this.authService = authService;\n      this.router = router;\n      this.route = route;\n      this.otp = '';\n      this.email = '';\n      this.isLoading = false;\n      this.errorMessage = '';\n      this.successMessage = '';\n    }\n    ngOnInit() {\n      this.email = this.route.snapshot.queryParams['email'] || '';\n      if (!this.email) {\n        this.router.navigate(['/auth/register']);\n      }\n    }\n    verifyOTP() {\n      if (this.otp && this.otp.length === 6) {\n        this.isLoading = true;\n        this.errorMessage = '';\n        this.successMessage = '';\n        this.authService.verifyOTP(this.email, this.otp).subscribe({\n          next: response => {\n            this.isLoading = false;\n            this.successMessage = 'Email verified successfully! Redirecting to login...';\n            setTimeout(() => {\n              this.router.navigate(['/auth/login']);\n            }, 2000);\n          },\n          error: error => {\n            this.isLoading = false;\n            this.errorMessage = error.error || 'OTP verification failed. Please try again.';\n          }\n        });\n      }\n    }\n    resendOTP() {\n      this.isLoading = true;\n      this.errorMessage = '';\n      this.successMessage = '';\n      this.authService.resendVerificationEmail(this.email).subscribe({\n        next: response => {\n          this.isLoading = false;\n          this.successMessage = 'New OTP sent to your email!';\n        },\n        error: error => {\n          this.isLoading = false;\n          this.errorMessage = 'Failed to resend OTP. Please try again.';\n        }\n      });\n    }\n    static {\n      this.ɵfac = function VerifyOtpComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || VerifyOtpComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: VerifyOtpComponent,\n        selectors: [[\"app-verify-otp\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 19,\n        vars: 7,\n        consts: [[1, \"d-flex\", \"justify-content-center\", \"align-items-center\", \"min-vh-100\"], [1, \"col-md-4\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\", \"text-center\", \"mb-4\"], [1, \"text-center\", \"text-muted\", \"mb-4\"], [3, \"ngSubmit\"], [1, \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Enter 6-digit OTP\", \"name\", \"otp\", \"maxlength\", \"6\", \"required\", \"\", 1, \"form-control\", \"text-center\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"w-100\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-2\", 4, \"ngIf\"], [1, \"text-center\", \"mt-3\"], [1, \"btn\", \"btn-link\", 3, \"click\", \"disabled\"], [1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-success\"], [1, \"spinner-border\", \"spinner-border-sm\", \"me-2\"]],\n        template: function VerifyOtpComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h3\", 4);\n            i0.ɵɵtext(5, \"Verify Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"p\", 5);\n            i0.ɵɵtext(7, \" We've sent a 6-digit OTP to your email address. Please enter it below. \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"form\", 6);\n            i0.ɵɵlistener(\"ngSubmit\", function VerifyOtpComponent_Template_form_ngSubmit_8_listener() {\n              return ctx.verifyOTP();\n            });\n            i0.ɵɵelementStart(9, \"div\", 7)(10, \"input\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function VerifyOtpComponent_Template_input_ngModelChange_10_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.otp, $event) || (ctx.otp = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(11, VerifyOtpComponent_div_11_Template, 3, 1, \"div\", 9)(12, VerifyOtpComponent_div_12_Template, 3, 1, \"div\", 9);\n            i0.ɵɵelementStart(13, \"button\", 10);\n            i0.ɵɵtemplate(14, VerifyOtpComponent_span_14_Template, 1, 0, \"span\", 11);\n            i0.ɵɵtext(15);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(16, \"div\", 12)(17, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function VerifyOtpComponent_Template_button_click_17_listener() {\n              return ctx.resendOTP();\n            });\n            i0.ɵɵtext(18, \" Resend OTP \");\n            i0.ɵɵelementEnd()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.otp);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading || !ctx.otp || ctx.otp.length !== 6);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isLoading ? \"Verifying...\" : \"Verify OTP\", \" \");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, FormsModule, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MaxLengthValidator, i4.NgModel, i4.NgForm],\n        encapsulation: 2\n      });\n    }\n  }\n  return VerifyOtpComponent;\n})();","map":{"version":3,"names":["CommonModule","FormsModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","errorMessage","successMessage","ɵɵelement","VerifyOtpComponent","constructor","authService","router","route","otp","email","isLoading","ngOnInit","snapshot","queryParams","navigate","verifyOTP","length","subscribe","next","response","setTimeout","error","resendOTP","resendVerificationEmail","ɵɵdirectiveInject","i1","AuthService","i2","Router","ActivatedRoute","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","VerifyOtpComponent_Template","rf","ctx","ɵɵlistener","VerifyOtpComponent_Template_form_ngSubmit_8_listener","ɵɵtwoWayListener","VerifyOtpComponent_Template_input_ngModelChange_10_listener","$event","ɵɵtwoWayBindingSet","ɵɵtemplate","VerifyOtpComponent_div_11_Template","VerifyOtpComponent_div_12_Template","VerifyOtpComponent_span_14_Template","VerifyOtpComponent_Template_button_click_17_listener","ɵɵtwoWayProperty","ɵɵproperty","ɵɵtextInterpolate1","i3","NgIf","i4","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","MaxLengthValidator","NgModel","NgForm","encapsulation"],"sources":["C:\\Users\\acer\\Downloads\\RevHubTeam7final_2\\RevHubTeam7final\\RevHub\\frontend-mfe\\shell-app\\src\\app\\modules\\auth\\verify-otp\\verify-otp.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AuthService } from '../../../core/services/auth.service';\n\n@Component({\n  selector: 'app-verify-otp',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  template: `\n    <div class=\"d-flex justify-content-center align-items-center min-vh-100\">\n      <div class=\"col-md-4\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <h3 class=\"card-title text-center mb-4\">Verify Email</h3>\n            <p class=\"text-center text-muted mb-4\">\n              We've sent a 6-digit OTP to your email address. Please enter it below.\n            </p>\n            <form (ngSubmit)=\"verifyOTP()\">\n              <div class=\"mb-3\">\n                <input \n                  type=\"text\" \n                  class=\"form-control text-center\" \n                  placeholder=\"Enter 6-digit OTP\" \n                  [(ngModel)]=\"otp\"\n                  name=\"otp\"\n                  maxlength=\"6\"\n                  required>\n              </div>\n              <div class=\"mb-3\" *ngIf=\"errorMessage\">\n                <div class=\"alert alert-danger\">{{errorMessage}}</div>\n              </div>\n              <div class=\"mb-3\" *ngIf=\"successMessage\">\n                <div class=\"alert alert-success\">{{successMessage}}</div>\n              </div>\n              <button \n                type=\"submit\" \n                class=\"btn btn-primary w-100\" \n                [disabled]=\"isLoading || !otp || otp.length !== 6\">\n                <span *ngIf=\"isLoading\" class=\"spinner-border spinner-border-sm me-2\"></span>\n                {{isLoading ? 'Verifying...' : 'Verify OTP'}}\n              </button>\n            </form>\n            <div class=\"text-center mt-3\">\n              <button class=\"btn btn-link\" (click)=\"resendOTP()\" [disabled]=\"isLoading\">\n                Resend OTP\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n})\nexport class VerifyOtpComponent implements OnInit {\n  otp = '';\n  email = '';\n  isLoading = false;\n  errorMessage = '';\n  successMessage = '';\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit() {\n    this.email = this.route.snapshot.queryParams['email'] || '';\n    if (!this.email) {\n      this.router.navigate(['/auth/register']);\n    }\n  }\n\n  verifyOTP() {\n    if (this.otp && this.otp.length === 6) {\n      this.isLoading = true;\n      this.errorMessage = '';\n      this.successMessage = '';\n\n      this.authService.verifyOTP(this.email, this.otp).subscribe({\n        next: (response) => {\n          this.isLoading = false;\n          this.successMessage = 'Email verified successfully! Redirecting to login...';\n          setTimeout(() => {\n            this.router.navigate(['/auth/login']);\n          }, 2000);\n        },\n        error: (error) => {\n          this.isLoading = false;\n          this.errorMessage = error.error || 'OTP verification failed. Please try again.';\n        }\n      });\n    }\n  }\n\n  resendOTP() {\n    this.isLoading = true;\n    this.errorMessage = '';\n    this.successMessage = '';\n\n    this.authService.resendVerificationEmail(this.email).subscribe({\n      next: (response) => {\n        this.isLoading = false;\n        this.successMessage = 'New OTP sent to your email!';\n      },\n      error: (error) => {\n        this.isLoading = false;\n        this.errorMessage = 'Failed to resend OTP. Please try again.';\n      }\n    });\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}