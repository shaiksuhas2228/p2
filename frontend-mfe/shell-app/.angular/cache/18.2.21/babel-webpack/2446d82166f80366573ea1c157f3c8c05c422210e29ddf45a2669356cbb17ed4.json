{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let FeedService = /*#__PURE__*/(() => {\n  class FeedService {\n    constructor() {\n      this.globalFeed = new BehaviorSubject([]);\n      this.userFeed = new BehaviorSubject([]);\n      this.feedCache = new Map();\n      this.currentPage = 0;\n      this.pageSize = 5;\n      this.initializeFeeds();\n    }\n    getGlobalFeed() {\n      return this.globalFeed.asObservable();\n    }\n    getUserFeed() {\n      return this.userFeed.asObservable();\n    }\n    getFollowingFeed(followingUsers, page = 0) {\n      const cacheKey = `following_${page}`;\n      if (this.feedCache.has(cacheKey)) {\n        return this.feedCache.get(cacheKey);\n      }\n      const allPosts = this.globalFeed.value;\n      const followingPosts = allPosts.filter(post => followingUsers.includes(post.author));\n      const popularPosts = allPosts.filter(post => post.isPopular && post.likes > 10);\n      const combinedFeed = [...followingPosts, ...popularPosts].sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n      const startIndex = page * this.pageSize;\n      const paginatedPosts = combinedFeed.slice(startIndex, startIndex + this.pageSize);\n      this.feedCache.set(cacheKey, paginatedPosts);\n      return paginatedPosts;\n    }\n    loadMorePosts(followingUsers) {\n      this.currentPage++;\n      return this.getFollowingFeed(followingUsers, this.currentPage);\n    }\n    resetPagination() {\n      this.currentPage = 0;\n      this.feedCache.clear();\n    }\n    deletePost(postId) {\n      const currentGlobal = this.globalFeed.value.filter(p => p.id !== postId);\n      const currentUser = this.userFeed.value.filter(p => p.id !== postId);\n      this.globalFeed.next(currentGlobal);\n      this.userFeed.next(currentUser);\n      this.feedCache.clear();\n    }\n    updatePost(updatedPost) {\n      const currentGlobal = this.globalFeed.value.map(p => p.id === updatedPost.id ? updatedPost : p);\n      const currentUser = this.userFeed.value.map(p => p.id === updatedPost.id ? updatedPost : p);\n      this.globalFeed.next(currentGlobal);\n      this.userFeed.next(currentUser);\n      this.feedCache.clear();\n    }\n    addPost(post) {\n      const currentGlobal = this.globalFeed.value;\n      const currentUser = this.userFeed.value;\n      this.globalFeed.next([post, ...currentGlobal]);\n      this.userFeed.next([post, ...currentUser]);\n    }\n    initializeFeeds() {\n      const samplePosts = [{\n        id: '1',\n        author: 'Priya Sharma',\n        content: 'Beautiful sunset today! #nature #photography',\n        timestamp: '2 hours ago',\n        likes: 15,\n        comments: 3,\n        shares: 2,\n        liked: false,\n        visibility: 'public',\n        isPopular: true,\n        commentsList: [{\n          id: 1,\n          author: 'Arjun',\n          content: 'Amazing shot!',\n          timestamp: '1 hour ago'\n        }, {\n          id: 2,\n          author: 'Kavya',\n          content: 'Beautiful colors',\n          timestamp: '30 min ago'\n        }]\n      }, {\n        id: '2',\n        author: 'Rohit Kumar',\n        content: 'Just finished my morning workout! Feeling great ðŸ’ª',\n        timestamp: '4 hours ago',\n        likes: 8,\n        comments: 1,\n        shares: 0,\n        liked: true,\n        visibility: 'public',\n        isPopular: false,\n        commentsList: [{\n          id: 3,\n          author: 'Vikram',\n          content: 'Keep it up!',\n          timestamp: '2 hours ago'\n        }]\n      }, {\n        id: '3',\n        author: 'Ananya Singh',\n        content: 'New recipe tried today! #cooking #foodie',\n        timestamp: '6 hours ago',\n        likes: 25,\n        comments: 8,\n        shares: 5,\n        liked: false,\n        visibility: 'public',\n        isPopular: true,\n        commentsList: []\n      }];\n      this.globalFeed.next(samplePosts);\n      this.userFeed.next(samplePosts);\n    }\n    static {\n      this.Éµfac = function FeedService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FeedService)();\n      };\n    }\n    static {\n      this.Éµprov = /*@__PURE__*/i0.ÉµÉµdefineInjectable({\n        token: FeedService,\n        factory: FeedService.Éµfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return FeedService;\n})();","map":{"version":3,"names":["BehaviorSubject","FeedService","constructor","globalFeed","userFeed","feedCache","Map","currentPage","pageSize","initializeFeeds","getGlobalFeed","asObservable","getUserFeed","getFollowingFeed","followingUsers","page","cacheKey","has","get","allPosts","value","followingPosts","filter","post","includes","author","popularPosts","isPopular","likes","combinedFeed","sort","a","b","Date","timestamp","getTime","startIndex","paginatedPosts","slice","set","loadMorePosts","resetPagination","clear","deletePost","postId","currentGlobal","p","id","currentUser","next","updatePost","updatedPost","map","addPost","samplePosts","content","comments","shares","liked","visibility","commentsList","factory","Éµfac","providedIn"],"sources":["C:\\Users\\acer\\Downloads\\RevHubTeam7final_2\\RevHubTeam7final\\RevHub\\frontend-mfe\\shell-app\\src\\app\\core\\services\\feed.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\nexport interface Post {\r\n  id: string;\r\n  author: string;\r\n  content: string;\r\n  timestamp: string;\r\n  likes: number;\r\n  comments: number;\r\n  shares: number;\r\n  liked: boolean;\r\n  media?: string;\r\n  mediaType?: 'image' | 'video';\r\n  visibility: 'public' | 'followers';\r\n  commentsList: any[];\r\n  isPopular?: boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FeedService {\r\n  private globalFeed = new BehaviorSubject<Post[]>([]);\r\n  private userFeed = new BehaviorSubject<Post[]>([]);\r\n  private feedCache = new Map<string, Post[]>();\r\n  private currentPage = 0;\r\n  private pageSize = 5;\r\n\r\n  constructor() {\r\n    this.initializeFeeds();\r\n  }\r\n\r\n  getGlobalFeed(): Observable<Post[]> {\r\n    return this.globalFeed.asObservable();\r\n  }\r\n\r\n  getUserFeed(): Observable<Post[]> {\r\n    return this.userFeed.asObservable();\r\n  }\r\n\r\n  getFollowingFeed(followingUsers: string[], page: number = 0): Post[] {\r\n    const cacheKey = `following_${page}`;\r\n    if (this.feedCache.has(cacheKey)) {\r\n      return this.feedCache.get(cacheKey)!;\r\n    }\r\n\r\n    const allPosts = this.globalFeed.value;\r\n    const followingPosts = allPosts.filter(post => followingUsers.includes(post.author));\r\n    const popularPosts = allPosts.filter(post => post.isPopular && post.likes > 10);\r\n    \r\n    const combinedFeed = [...followingPosts, ...popularPosts]\r\n      .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\r\n    \r\n    const startIndex = page * this.pageSize;\r\n    const paginatedPosts = combinedFeed.slice(startIndex, startIndex + this.pageSize);\r\n    \r\n    this.feedCache.set(cacheKey, paginatedPosts);\r\n    return paginatedPosts;\r\n  }\r\n\r\n  loadMorePosts(followingUsers: string[]): Post[] {\r\n    this.currentPage++;\r\n    return this.getFollowingFeed(followingUsers, this.currentPage);\r\n  }\r\n\r\n  resetPagination() {\r\n    this.currentPage = 0;\r\n    this.feedCache.clear();\r\n  }\r\n\r\n  deletePost(postId: string): void {\r\n    const currentGlobal = this.globalFeed.value.filter(p => p.id !== postId);\r\n    const currentUser = this.userFeed.value.filter(p => p.id !== postId);\r\n    \r\n    this.globalFeed.next(currentGlobal);\r\n    this.userFeed.next(currentUser);\r\n    this.feedCache.clear();\r\n  }\r\n\r\n  updatePost(updatedPost: Post): void {\r\n    const currentGlobal = this.globalFeed.value.map(p => p.id === updatedPost.id ? updatedPost : p);\r\n    const currentUser = this.userFeed.value.map(p => p.id === updatedPost.id ? updatedPost : p);\r\n    \r\n    this.globalFeed.next(currentGlobal);\r\n    this.userFeed.next(currentUser);\r\n    this.feedCache.clear();\r\n  }\r\n\r\n  addPost(post: Post): void {\r\n    const currentGlobal = this.globalFeed.value;\r\n    const currentUser = this.userFeed.value;\r\n    \r\n    this.globalFeed.next([post, ...currentGlobal]);\r\n    this.userFeed.next([post, ...currentUser]);\r\n  }\r\n\r\n  private initializeFeeds(): void {\r\n    const samplePosts: Post[] = [\r\n      {\r\n        id: '1',\r\n        author: 'Priya Sharma',\r\n        content: 'Beautiful sunset today! #nature #photography',\r\n        timestamp: '2 hours ago',\r\n        likes: 15,\r\n        comments: 3,\r\n        shares: 2,\r\n        liked: false,\r\n        visibility: 'public',\r\n        isPopular: true,\r\n        commentsList: [\r\n          { id: 1, author: 'Arjun', content: 'Amazing shot!', timestamp: '1 hour ago' },\r\n          { id: 2, author: 'Kavya', content: 'Beautiful colors', timestamp: '30 min ago' }\r\n        ]\r\n      },\r\n      {\r\n        id: '2',\r\n        author: 'Rohit Kumar',\r\n        content: 'Just finished my morning workout! Feeling great ðŸ’ª',\r\n        timestamp: '4 hours ago',\r\n        likes: 8,\r\n        comments: 1,\r\n        shares: 0,\r\n        liked: true,\r\n        visibility: 'public',\r\n        isPopular: false,\r\n        commentsList: [\r\n          { id: 3, author: 'Vikram', content: 'Keep it up!', timestamp: '2 hours ago' }\r\n        ]\r\n      },\r\n      {\r\n        id: '3',\r\n        author: 'Ananya Singh',\r\n        content: 'New recipe tried today! #cooking #foodie',\r\n        timestamp: '6 hours ago',\r\n        likes: 25,\r\n        comments: 8,\r\n        shares: 5,\r\n        liked: false,\r\n        visibility: 'public',\r\n        isPopular: true,\r\n        commentsList: []\r\n      }\r\n    ];\r\n\r\n    this.globalFeed.next(samplePosts);\r\n    this.userFeed.next(samplePosts);\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}