{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AvatarComponent } from '../../shared/components/avatar.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/chat.service\";\nimport * as i2 from \"../../core/services/auth.service\";\nimport * as i3 from \"../../core/services/profile.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction ChatComponent_div_37_div_1_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function ChatComponent_div_37_div_1_button_4_Template_button_click_0_listener() {\n      const user_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r2.startChat(user_r2));\n    });\n    i0.ɵɵelementStart(1, \"div\", 36);\n    i0.ɵɵelement(2, \"app-avatar\", 37);\n    i0.ɵɵelementStart(3, \"div\")(4, \"h6\", 20);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"small\", 38);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const user_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", user_r2.profilePicture)(\"name\", user_r2.username)(\"size\", 40);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r2.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r2.bio || \"Click to start chat\");\n  }\n}\nfunction ChatComponent_div_37_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 32);\n    i0.ɵɵtext(2, \"Search Results\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 33);\n    i0.ɵɵtemplate(4, ChatComponent_div_37_div_1_button_4_Template, 8, 5, \"button\", 34);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.searchResults);\n  }\n}\nfunction ChatComponent_div_37_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵelement(1, \"i\", 40);\n    i0.ɵɵelementStart(2, \"h6\");\n    i0.ɵɵtext(3, \"No followers found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"No followers match \\\"\", ctx_r2.searchQuery, \"\\\"\");\n  }\n}\nfunction ChatComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ChatComponent_div_37_div_1_Template, 5, 1, \"div\", 27)(2, ChatComponent_div_37_div_2_Template, 6, 1, \"div\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.searchResults.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.searchResults.length === 0);\n  }\n}\nfunction ChatComponent_div_38_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"div\", 43)(2, \"span\", 44);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ChatComponent_div_38_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵelement(1, \"i\", 45);\n    i0.ɵɵelementStart(2, \"h6\");\n    i0.ɵɵtext(3, \"No conversations yet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Search above to find followers to chat with\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatComponent_div_38_div_3_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function ChatComponent_div_38_div_3_button_4_Template_button_click_0_listener() {\n      const contact_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r2.selectChat(contact_r5));\n    });\n    i0.ɵɵelementStart(1, \"div\", 36);\n    i0.ɵɵelement(2, \"app-avatar\", 37);\n    i0.ɵɵelementStart(3, \"div\")(4, \"h6\", 20);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"small\", 38);\n    i0.ɵɵtext(7, \"Click to open chat\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const contact_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", contact_r5.profilePicture || \"\")(\"name\", contact_r5.username || contact_r5)(\"size\", 40);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(contact_r5.username || contact_r5);\n  }\n}\nfunction ChatComponent_div_38_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 32);\n    i0.ɵɵtext(2, \"Recent Conversations\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 33);\n    i0.ɵɵtemplate(4, ChatComponent_div_38_div_3_button_4_Template, 8, 4, \"button\", 34);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.contacts);\n  }\n}\nfunction ChatComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ChatComponent_div_38_div_1_Template, 4, 0, \"div\", 41)(2, ChatComponent_div_38_div_2_Template, 6, 0, \"div\", 31)(3, ChatComponent_div_38_div_3_Template, 5, 1, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isLoading && ctx_r2.contacts.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isLoading && ctx_r2.contacts.length > 0);\n  }\n}\nfunction ChatComponent_div_40_div_13_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 65);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(message_r7.senderUsername);\n  }\n}\nfunction ChatComponent_div_40_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60)(1, \"div\")(2, \"div\", 61)(3, \"div\", 62);\n    i0.ɵɵtemplate(4, ChatComponent_div_40_div_13_div_4_Template, 2, 1, \"div\", 63);\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"small\", 64);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const message_r7 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(message_r7.senderUsername === (ctx_r2.currentUser == null ? null : ctx_r2.currentUser.username) ? \"text-end\" : \"text-start\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(message_r7.senderUsername === (ctx_r2.currentUser == null ? null : ctx_r2.currentUser.username) ? \"bg-primary text-white\" : \"bg-white\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", message_r7.senderUsername !== (ctx_r2.currentUser == null ? null : ctx_r2.currentUser.username));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(message_r7.content);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(9, 7, message_r7.timestamp, \"short\"));\n  }\n}\nfunction ChatComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"div\", 47)(2, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function ChatComponent_div_40_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.backToContacts());\n    });\n    i0.ɵɵelement(3, \"i\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"app-avatar\", 37);\n    i0.ɵɵelementStart(5, \"div\")(6, \"h6\", 20);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"small\", 50);\n    i0.ɵɵelement(9, \"i\", 51);\n    i0.ɵɵtext(10, \"Online \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"div\", 52)(12, \"div\", 53);\n    i0.ɵɵtemplate(13, ChatComponent_div_40_div_13_Template, 10, 10, \"div\", 54);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 55)(15, \"div\", 56)(16, \"input\", 57);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ChatComponent_div_40_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newMessage, $event) || (ctx_r2.newMessage = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"keyup.enter\", function ChatComponent_div_40_Template_input_keyup_enter_16_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.sendMessage());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 58);\n    i0.ɵɵlistener(\"click\", function ChatComponent_div_40_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.sendMessage());\n    });\n    i0.ɵɵelement(18, \"i\", 59);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r2.getSelectedContactPicture())(\"name\", ctx_r2.selectedChat)(\"size\", 40);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedChat);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.messages[ctx_r2.selectedChat]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newMessage);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.newMessage.trim());\n  }\n}\nfunction ChatComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66)(1, \"div\", 67);\n    i0.ɵɵelement(2, \"i\", 68);\n    i0.ɵɵelementStart(3, \"h4\");\n    i0.ɵɵtext(4, \"Select a conversation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"Search for followers to start a new chat or choose from existing conversations\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport let ChatComponent = /*#__PURE__*/(() => {\n  class ChatComponent {\n    constructor(chatService, authService, profileService) {\n      this.chatService = chatService;\n      this.authService = authService;\n      this.profileService = profileService;\n      this.contacts = [];\n      this.selectedChat = null;\n      this.messages = {};\n      this.newMessage = '';\n      this.currentUser = null;\n      this.isLoading = true;\n      this.searchQuery = '';\n      this.searchResults = [];\n      this.followingList = [];\n    }\n    ngOnInit() {\n      this.currentUser = this.authService.getCurrentUser();\n      this.loadChatContacts();\n      this.loadFollowing();\n    }\n    loadChatContacts() {\n      this.chatService.getChatContacts(this.currentUser?.id).subscribe({\n        next: conversations => {\n          const uniqueContacts = new Set();\n          conversations.forEach(conv => {\n            const otherUsername = conv.participantUsernames?.find(u => u !== this.currentUser?.username);\n            if (otherUsername) uniqueContacts.add(otherUsername);\n          });\n          this.contacts = Array.from(uniqueContacts);\n          this.loadContactProfiles();\n          this.isLoading = false;\n        },\n        error: error => {\n          console.error('Error loading chat contacts:', error);\n          this.isLoading = false;\n        }\n      });\n    }\n    loadContactProfiles() {\n      this.contacts.forEach(username => {\n        this.profileService.getProfile(username).subscribe({\n          next: profile => {\n            const index = this.contacts.indexOf(username);\n            if (index !== -1) {\n              this.contacts[index] = {\n                username: profile.username,\n                profilePicture: profile.profilePicture || ''\n              };\n            }\n          },\n          error: err => console.error('Error loading profile:', err)\n        });\n      });\n    }\n    loadFollowing() {\n      if (this.currentUser?.username) {\n        this.profileService.getFollowing(this.currentUser.username).subscribe({\n          next: following => {\n            this.followingList = following.map(user => ({\n              ...user,\n              profilePicture: user.profilePicture || ''\n            }));\n          },\n          error: error => {\n            console.error('Error loading following:', error);\n          }\n        });\n      }\n    }\n    onSearchInput() {\n      if (!this.searchQuery.trim()) {\n        this.searchResults = [];\n        return;\n      }\n      this.searchResults = this.followingList.filter(user => user.username.toLowerCase().includes(this.searchQuery.toLowerCase()));\n    }\n    startChat(user) {\n      this.selectedChat = user.username;\n      this.searchQuery = '';\n      this.searchResults = [];\n      this.loadConversation(user.username);\n      const existingContact = this.contacts.find(c => (typeof c === 'string' ? c : c.username) === user.username);\n      if (!existingContact) {\n        this.contacts.unshift({\n          username: user.username,\n          profilePicture: user.profilePicture || ''\n        });\n      }\n    }\n    selectChat(contact) {\n      this.selectedChat = typeof contact === 'string' ? contact : contact.username;\n      this.loadConversation(this.selectedChat);\n    }\n    loadConversation(username) {\n      this.chatService.getConversation(username).subscribe({\n        next: messages => {\n          this.messages[username] = messages;\n        },\n        error: error => {\n          console.error('Error loading conversation:', error);\n          this.messages[username] = [];\n        }\n      });\n    }\n    sendMessage() {\n      if (this.newMessage.trim() && this.selectedChat) {\n        this.chatService.sendMessage(this.selectedChat, this.newMessage.trim()).subscribe({\n          next: message => {\n            if (!this.messages[this.selectedChat]) {\n              this.messages[this.selectedChat] = [];\n            }\n            this.messages[this.selectedChat].push(message);\n            this.newMessage = '';\n          },\n          error: error => {\n            console.error('Error sending message:', error);\n          }\n        });\n      }\n    }\n    backToContacts() {\n      this.selectedChat = null;\n    }\n    getSelectedContactPicture() {\n      if (!this.selectedChat) return '';\n      const contact = this.contacts.find(c => (typeof c === 'string' ? c : c.username) === this.selectedChat);\n      return contact && typeof contact !== 'string' ? contact.profilePicture || '' : '';\n    }\n    static {\n      this.ɵfac = function ChatComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ChatComponent)(i0.ɵɵdirectiveInject(i1.ChatService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ProfileService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ChatComponent,\n        selectors: [[\"app-chat\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 42,\n        vars: 9,\n        consts: [[1, \"navbar\", \"navbar-expand-lg\", \"fixed-top\"], [1, \"container-fluid\", \"px-4\"], [\"href\", \"#\", 1, \"navbar-brand\", \"fw-bold\"], [1, \"fas\", \"fa-rocket\", \"me-2\"], [1, \"d-flex\", \"align-items-center\", \"gap-3\"], [\"href\", \"/dashboard\", 1, \"btn\", \"btn-link\", \"nav-link\"], [1, \"fas\", \"fa-home\", \"me-1\"], [1, \"fas\", \"fa-plus\", \"me-1\"], [1, \"btn\", \"btn-link\", \"nav-link\", \"active\"], [1, \"fas\", \"fa-comments\", \"me-1\"], [\"href\", \"/notifications\", 1, \"btn\", \"btn-link\", \"nav-link\"], [1, \"fas\", \"fa-bell\", \"me-1\"], [1, \"fas\", \"fa-user\", \"me-1\"], [\"href\", \"/auth/login\", 1, \"btn\", \"btn-outline-danger\", \"btn-sm\"], [1, \"fas\", \"fa-sign-out-alt\", \"me-1\"], [1, \"container-fluid\", 2, \"margin-top\", \"80px\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"card\"], [1, \"card-header\"], [1, \"mb-0\"], [1, \"card-body\", \"pb-0\"], [1, \"input-group\", \"mb-3\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-search\"], [\"type\", \"text\", \"placeholder\", \"Search followers to chat...\", 1, \"form-control\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"card-body\", \"pt-0\", 2, \"max-height\", \"500px\", \"overflow-y\", \"auto\"], [4, \"ngIf\"], [1, \"col-md-8\"], [\"class\", \"card\", \"style\", \"height: 600px;\", 4, \"ngIf\"], [\"class\", \"card d-flex align-items-center justify-content-center\", \"style\", \"height: 600px;\", 4, \"ngIf\"], [\"class\", \"text-center text-muted py-4\", 4, \"ngIf\"], [1, \"text-muted\", \"mb-3\"], [1, \"list-group\", \"list-group-flush\"], [\"class\", \"list-group-item list-group-item-action border-0 rounded mb-2\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\", \"list-group-item-action\", \"border-0\", \"rounded\", \"mb-2\", 3, \"click\"], [1, \"d-flex\", \"align-items-center\"], [1, \"me-3\", 3, \"src\", \"name\", \"size\"], [1, \"text-muted\"], [1, \"text-center\", \"text-muted\", \"py-4\"], [1, \"fas\", \"fa-user-friends\", \"fa-2x\", \"mb-3\"], [\"class\", \"text-center\", 4, \"ngIf\"], [1, \"text-center\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"visually-hidden\"], [1, \"fas\", \"fa-comments\", \"fa-3x\", \"mb-3\"], [1, \"card\", 2, \"height\", \"600px\"], [1, \"card-header\", \"d-flex\", \"align-items-center\"], [1, \"btn\", \"btn-outline-secondary\", \"btn-sm\", \"me-3\", \"d-md-none\", 3, \"click\"], [1, \"fas\", \"fa-arrow-left\"], [1, \"text-success\"], [1, \"fas\", \"fa-circle\", \"me-1\", 2, \"font-size\", \"0.5rem\"], [1, \"card-body\", \"d-flex\", \"flex-column\", \"p-0\", 2, \"height\", \"500px\"], [1, \"flex-grow-1\", \"p-3\", 2, \"overflow-y\", \"auto\", \"background\", \"rgba(0,0,0,0.02)\"], [\"class\", \"mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"p-3\", \"border-top\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Type a message...\", 1, \"form-control\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [1, \"btn\", \"btn-primary\", 3, \"click\", \"disabled\"], [1, \"fas\", \"fa-paper-plane\"], [1, \"mb-3\"], [1, \"d-inline-block\", 2, \"max-width\", \"70%\"], [1, \"px-3\", \"py-2\", \"rounded-3\", \"shadow-sm\"], [\"class\", \"fw-semibold mb-1\", 4, \"ngIf\"], [1, \"text-muted\", \"d-block\", \"mt-1\"], [1, \"fw-semibold\", \"mb-1\"], [1, \"card\", \"d-flex\", \"align-items-center\", \"justify-content-center\", 2, \"height\", \"600px\"], [1, \"text-center\", \"text-muted\"], [1, \"fas\", \"fa-comments\", \"fa-4x\", \"mb-4\"]],\n        template: function ChatComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"a\", 2);\n            i0.ɵɵelement(3, \"i\", 3);\n            i0.ɵɵtext(4, \"RevHub \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 4)(6, \"a\", 5);\n            i0.ɵɵelement(7, \"i\", 6);\n            i0.ɵɵtext(8, \"Feed \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"a\", 5);\n            i0.ɵɵelement(10, \"i\", 7);\n            i0.ɵɵtext(11, \"Create \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"button\", 8);\n            i0.ɵɵelement(13, \"i\", 9);\n            i0.ɵɵtext(14, \"Chat \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"a\", 10);\n            i0.ɵɵelement(16, \"i\", 11);\n            i0.ɵɵtext(17, \"Notifications \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"a\", 5);\n            i0.ɵɵelement(19, \"i\", 12);\n            i0.ɵɵtext(20, \"Profile \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"a\", 13);\n            i0.ɵɵelement(22, \"i\", 14);\n            i0.ɵɵtext(23, \"Logout \");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(24, \"div\", 15)(25, \"div\", 16)(26, \"div\", 17)(27, \"div\", 18)(28, \"div\", 19)(29, \"h5\", 20);\n            i0.ɵɵtext(30, \"Messages\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(31, \"div\", 21)(32, \"div\", 22)(33, \"span\", 23);\n            i0.ɵɵelement(34, \"i\", 24);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(35, \"input\", 25);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ChatComponent_Template_input_ngModelChange_35_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchQuery, $event) || (ctx.searchQuery = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function ChatComponent_Template_input_input_35_listener() {\n              return ctx.onSearchInput();\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(36, \"div\", 26);\n            i0.ɵɵtemplate(37, ChatComponent_div_37_Template, 3, 2, \"div\", 27)(38, ChatComponent_div_38_Template, 4, 3, \"div\", 27);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(39, \"div\", 28);\n            i0.ɵɵtemplate(40, ChatComponent_div_40_Template, 19, 7, \"div\", 29)(41, ChatComponent_div_41_Template, 7, 0, \"div\", 30);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(26);\n            i0.ɵɵclassProp(\"d-none\", ctx.selectedChat);\n            i0.ɵɵadvance(9);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchQuery);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.searchQuery.trim());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.searchQuery.trim());\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"col-12\", ctx.selectedChat);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedChat);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.selectedChat);\n          }\n        },\n        dependencies: [CommonModule, i4.NgForOf, i4.NgIf, i4.DatePipe, FormsModule, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, AvatarComponent],\n        styles: [\".chat-container[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  background: linear-gradient(135deg, rgba(240, 253, 250, 0.3), rgba(255, 255, 255, 0.5));\\n  border-radius: 20px;\\n  min-height: 70vh;\\n}\\n\\n.chat-message[_ngcontent-%COMP%] {\\n  padding: 12px 18px;\\n  border-radius: 18px;\\n  margin-bottom: 10px;\\n  max-width: 70%;\\n  word-wrap: break-word;\\n  transition: all 0.3s ease;\\n}\\n\\n.chat-message.sent[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #14B8A6, #5EEAD4);\\n  color: white;\\n  margin-left: auto;\\n  border-bottom-right-radius: 6px;\\n}\\n\\n.chat-message.received[_ngcontent-%COMP%] {\\n  background: rgba(249, 115, 22, 0.1);\\n  color: #134E4A;\\n  border: 1px solid rgba(249, 115, 22, 0.2);\\n  border-bottom-left-radius: 6px;\\n}\\n\\n.chat-input[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.9);\\n  border: 2px solid rgba(20, 184, 166, 0.2);\\n  border-radius: 25px;\\n  padding: 12px 20px;\\n  transition: all 0.3s ease;\\n}\\n\\n.chat-input[_ngcontent-%COMP%]:focus {\\n  border-color: #F97316;\\n  box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);\\n  outline: none;\\n}\\n\\n.chat-send-btn[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, #14B8A6, #F97316);\\n  border: none;\\n  border-radius: 50%;\\n  width: 45px;\\n  height: 45px;\\n  color: white;\\n  transition: all 0.3s ease;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.chat-send-btn[_ngcontent-%COMP%]:hover {\\n  transform: scale(1.1);\\n  box-shadow: 0 4px 15px rgba(20, 184, 166, 0.3);\\n}\\n\\n.chat-user-list[_ngcontent-%COMP%] {\\n  background: rgba(255, 255, 255, 0.8);\\n  border-radius: 15px;\\n  padding: 15px;\\n  border: 1px solid rgba(20, 184, 166, 0.2);\\n}\\n\\n.chat-user-item[_ngcontent-%COMP%] {\\n  padding: 12px;\\n  border-radius: 12px;\\n  margin-bottom: 8px;\\n  transition: all 0.3s ease;\\n  cursor: pointer;\\n}\\n\\n.chat-user-item[_ngcontent-%COMP%]:hover {\\n  background: rgba(20, 184, 166, 0.1);\\n  transform: translateX(5px);\\n}\\n\\n.chat-user-item.active[_ngcontent-%COMP%] {\\n  background: linear-gradient(135deg, rgba(20, 184, 166, 0.2), rgba(249, 115, 22, 0.1));\\n  border-left: 4px solid #14B8A6;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy9jaGF0L2NoYXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYix1RkFBdUY7RUFDdkYsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsbUJBQW1CO0VBQ25CLGNBQWM7RUFDZCxxQkFBcUI7RUFDckIseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UscURBQXFEO0VBQ3JELFlBQVk7RUFDWixpQkFBaUI7RUFDakIsK0JBQStCO0FBQ2pDOztBQUVBO0VBQ0UsbUNBQW1DO0VBQ25DLGNBQWM7RUFDZCx5Q0FBeUM7RUFDekMsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLHlDQUF5QztFQUN6QyxtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQiw2Q0FBNkM7RUFDN0MsYUFBYTtBQUNmOztBQUVBO0VBQ0UscURBQXFEO0VBQ3JELFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLDhDQUE4QztBQUNoRDs7QUFFQTtFQUNFLG9DQUFvQztFQUNwQyxtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLHlDQUF5QztBQUMzQzs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLHlCQUF5QjtFQUN6QixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsbUNBQW1DO0VBQ25DLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLHFGQUFxRjtFQUNyRiw4QkFBOEI7QUFDaEMiLCJzb3VyY2VzQ29udGVudCI6WyIuY2hhdC1jb250YWluZXIge1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgcmdiYSgyNDAsIDI1MywgMjUwLCAwLjMpLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSkpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XHJcbiAgbWluLWhlaWdodDogNzB2aDtcclxufVxyXG5cclxuLmNoYXQtbWVzc2FnZSB7XHJcbiAgcGFkZGluZzogMTJweCAxOHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE4cHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICBtYXgtd2lkdGg6IDcwJTtcclxuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcclxufVxyXG5cclxuLmNoYXQtbWVzc2FnZS5zZW50IHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMTRCOEE2LCAjNUVFQUQ0KTtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDZweDtcclxufVxyXG5cclxuLmNoYXQtbWVzc2FnZS5yZWNlaXZlZCB7XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNDksIDExNSwgMjIsIDAuMSk7XHJcbiAgY29sb3I6ICMxMzRFNEE7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNDksIDExNSwgMjIsIDAuMik7XHJcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNnB4O1xyXG59XHJcblxyXG4uY2hhdC1pbnB1dCB7XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpO1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMjAsIDE4NCwgMTY2LCAwLjIpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDI1cHg7XHJcbiAgcGFkZGluZzogMTJweCAyMHB4O1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XHJcbn1cclxuXHJcbi5jaGF0LWlucHV0OmZvY3VzIHtcclxuICBib3JkZXItY29sb3I6ICNGOTczMTY7XHJcbiAgYm94LXNoYWRvdzogMCAwIDAgM3B4IHJnYmEoMjQ5LCAxMTUsIDIyLCAwLjEpO1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbn1cclxuXHJcbi5jaGF0LXNlbmQtYnRuIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMTRCOEE2LCAjRjk3MzE2KTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIHdpZHRoOiA0NXB4O1xyXG4gIGhlaWdodDogNDVweDtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuXHJcbi5jaGF0LXNlbmQtYnRuOmhvdmVyIHtcclxuICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDIwLCAxODQsIDE2NiwgMC4zKTtcclxufVxyXG5cclxuLmNoYXQtdXNlci1saXN0IHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XHJcbiAgYm9yZGVyLXJhZGl1czogMTVweDtcclxuICBwYWRkaW5nOiAxNXB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjAsIDE4NCwgMTY2LCAwLjIpO1xyXG59XHJcblxyXG4uY2hhdC11c2VyLWl0ZW0ge1xyXG4gIHBhZGRpbmc6IDEycHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICBtYXJnaW4tYm90dG9tOiA4cHg7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5jaGF0LXVzZXItaXRlbTpob3ZlciB7XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyMCwgMTg0LCAxNjYsIDAuMSk7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDVweCk7XHJcbn1cclxuXHJcbi5jaGF0LXVzZXItaXRlbS5hY3RpdmUge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMjAsIDE4NCwgMTY2LCAwLjIpLCByZ2JhKDI0OSwgMTE1LCAyMiwgMC4xKSk7XHJcbiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMTRCOEE2O1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n      });\n    }\n  }\n  return ChatComponent;\n})();","map":{"version":3,"names":["CommonModule","FormsModule","AvatarComponent","i0","ɵɵelementStart","ɵɵlistener","ChatComponent_div_37_div_1_button_4_Template_button_click_0_listener","user_r2","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","startChat","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","profilePicture","username","ɵɵtextInterpolate","bio","ɵɵtemplate","ChatComponent_div_37_div_1_button_4_Template","searchResults","ɵɵtextInterpolate1","searchQuery","ChatComponent_div_37_div_1_Template","ChatComponent_div_37_div_2_Template","length","ChatComponent_div_38_div_3_button_4_Template_button_click_0_listener","contact_r5","_r4","selectChat","ChatComponent_div_38_div_3_button_4_Template","contacts","ChatComponent_div_38_div_1_Template","ChatComponent_div_38_div_2_Template","ChatComponent_div_38_div_3_Template","isLoading","message_r7","senderUsername","ChatComponent_div_40_div_13_div_4_Template","ɵɵclassMap","currentUser","content","ɵɵpipeBind2","timestamp","ChatComponent_div_40_Template_button_click_2_listener","_r6","backToContacts","ChatComponent_div_40_div_13_Template","ɵɵtwoWayListener","ChatComponent_div_40_Template_input_ngModelChange_16_listener","$event","ɵɵtwoWayBindingSet","newMessage","ChatComponent_div_40_Template_input_keyup_enter_16_listener","sendMessage","ChatComponent_div_40_Template_button_click_17_listener","getSelectedContactPicture","selectedChat","messages","ɵɵtwoWayProperty","trim","ChatComponent","constructor","chatService","authService","profileService","followingList","ngOnInit","getCurrentUser","loadChatContacts","loadFollowing","getChatContacts","id","subscribe","next","conversations","uniqueContacts","Set","forEach","conv","otherUsername","participantUsernames","find","u","add","Array","from","loadContactProfiles","error","console","getProfile","profile","index","indexOf","err","getFollowing","following","map","user","onSearchInput","filter","toLowerCase","includes","loadConversation","existingContact","c","unshift","contact","getConversation","message","push","ɵɵdirectiveInject","i1","ChatService","i2","AuthService","i3","ProfileService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ChatComponent_Template","rf","ctx","ChatComponent_Template_input_ngModelChange_35_listener","ChatComponent_Template_input_input_35_listener","ChatComponent_div_37_Template","ChatComponent_div_38_Template","ChatComponent_div_40_Template","ChatComponent_div_41_Template","ɵɵclassProp","i4","NgForOf","NgIf","DatePipe","i5","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"sources":["C:\\Users\\acer\\Downloads\\RevHubTeam7final_2\\RevHubTeam7final\\RevHub\\frontend-mfe\\shell-app\\src\\app\\modules\\chat\\chat.component.ts","C:\\Users\\acer\\Downloads\\RevHubTeam7final_2\\RevHubTeam7final\\RevHub\\frontend-mfe\\shell-app\\src\\app\\modules\\chat\\chat.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ChatService, ChatMessage } from '../../core/services/chat.service';\r\nimport { AuthService } from '../../core/services/auth.service';\r\nimport { ProfileService } from '../../core/services/profile.service';\r\nimport { AvatarComponent } from '../../shared/components/avatar.component';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, AvatarComponent],\r\n  templateUrl: './chat.component.html',\r\n  styleUrl: './chat.component.css'\r\n})\r\nexport class ChatComponent implements OnInit {\r\n  contacts: any[] = [];\r\n  selectedChat: string | null = null;\r\n  messages: { [key: string]: ChatMessage[] } = {};\r\n  newMessage = '';\r\n  currentUser: any = null;\r\n  isLoading = true;\r\n  searchQuery = '';\r\n  searchResults: any[] = [];\r\n  followingList: any[] = [];\r\n\r\n  constructor(\r\n    private chatService: ChatService,\r\n    private authService: AuthService,\r\n    private profileService: ProfileService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    this.loadChatContacts();\r\n    this.loadFollowing();\r\n  }\r\n\r\n  loadChatContacts() {\r\n    this.chatService.getChatContacts(this.currentUser?.id).subscribe({\r\n      next: (conversations) => {\r\n        const uniqueContacts = new Set<string>();\r\n        conversations.forEach((conv: any) => {\r\n          const otherUsername = conv.participantUsernames?.find((u: string) => u !== this.currentUser?.username);\r\n          if (otherUsername) uniqueContacts.add(otherUsername);\r\n        });\r\n        this.contacts = Array.from(uniqueContacts);\r\n        this.loadContactProfiles();\r\n        this.isLoading = false;\r\n      },\r\n      error: (error) => {\r\n        console.error('Error loading chat contacts:', error);\r\n        this.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadContactProfiles() {\r\n    this.contacts.forEach(username => {\r\n      this.profileService.getProfile(username).subscribe({\r\n        next: (profile) => {\r\n          const index = this.contacts.indexOf(username);\r\n          if (index !== -1) {\r\n            this.contacts[index] = {\r\n              username: profile.username,\r\n              profilePicture: profile.profilePicture || ''\r\n            };\r\n          }\r\n        },\r\n        error: (err) => console.error('Error loading profile:', err)\r\n      });\r\n    });\r\n  }\r\n\r\n  loadFollowing() {\r\n    if (this.currentUser?.username) {\r\n      this.profileService.getFollowing(this.currentUser.username).subscribe({\r\n        next: (following) => {\r\n          this.followingList = following.map(user => ({\r\n            ...user,\r\n            profilePicture: user.profilePicture || ''\r\n          }));\r\n        },\r\n        error: (error) => {\r\n          console.error('Error loading following:', error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onSearchInput() {\r\n    if (!this.searchQuery.trim()) {\r\n      this.searchResults = [];\r\n      return;\r\n    }\r\n    \r\n    this.searchResults = this.followingList.filter(user => \r\n      user.username.toLowerCase().includes(this.searchQuery.toLowerCase())\r\n    );\r\n  }\r\n\r\n  startChat(user: any) {\r\n    this.selectedChat = user.username;\r\n    this.searchQuery = '';\r\n    this.searchResults = [];\r\n    this.loadConversation(user.username);\r\n    const existingContact = this.contacts.find(c => \r\n      (typeof c === 'string' ? c : c.username) === user.username\r\n    );\r\n    if (!existingContact) {\r\n      this.contacts.unshift({\r\n        username: user.username,\r\n        profilePicture: user.profilePicture || ''\r\n      });\r\n    }\r\n  }\r\n\r\n  selectChat(contact: any) {\r\n    this.selectedChat = typeof contact === 'string' ? contact : contact.username;\r\n    this.loadConversation(this.selectedChat);\r\n  }\r\n\r\n  loadConversation(username: string) {\r\n    this.chatService.getConversation(username).subscribe({\r\n      next: (messages) => {\r\n        this.messages[username] = messages;\r\n      },\r\n      error: (error) => {\r\n        console.error('Error loading conversation:', error);\r\n        this.messages[username] = [];\r\n      }\r\n    });\r\n  }\r\n\r\n  sendMessage() {\r\n    if (this.newMessage.trim() && this.selectedChat) {\r\n      this.chatService.sendMessage(this.selectedChat, this.newMessage.trim()).subscribe({\r\n        next: (message) => {\r\n          if (!this.messages[this.selectedChat!]) {\r\n            this.messages[this.selectedChat!] = [];\r\n          }\r\n          this.messages[this.selectedChat!].push(message);\r\n          this.newMessage = '';\r\n        },\r\n        error: (error) => {\r\n          console.error('Error sending message:', error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  backToContacts() {\r\n    this.selectedChat = null;\r\n  }\r\n\r\n  getSelectedContactPicture(): string {\r\n    if (!this.selectedChat) return '';\r\n    const contact = this.contacts.find(c => \r\n      (typeof c === 'string' ? c : c.username) === this.selectedChat\r\n    );\r\n    return contact && typeof contact !== 'string' ? contact.profilePicture || '' : '';\r\n  }\r\n}","<!-- Top Navigation Bar -->\r\n<nav class=\"navbar navbar-expand-lg fixed-top\">\r\n  <div class=\"container-fluid px-4\">\r\n    <a class=\"navbar-brand fw-bold\" href=\"#\">\r\n      <i class=\"fas fa-rocket me-2\"></i>RevHub\r\n    </a>\r\n    \r\n    <div class=\"d-flex align-items-center gap-3\">\r\n      <a class=\"btn btn-link nav-link\" href=\"/dashboard\">\r\n        <i class=\"fas fa-home me-1\"></i>Feed\r\n      </a>\r\n      <a class=\"btn btn-link nav-link\" href=\"/dashboard\">\r\n        <i class=\"fas fa-plus me-1\"></i>Create\r\n      </a>\r\n      <button class=\"btn btn-link nav-link active\">\r\n        <i class=\"fas fa-comments me-1\"></i>Chat\r\n      </button>\r\n      <a class=\"btn btn-link nav-link\" href=\"/notifications\">\r\n        <i class=\"fas fa-bell me-1\"></i>Notifications\r\n      </a>\r\n      <a class=\"btn btn-link nav-link\" href=\"/dashboard\">\r\n        <i class=\"fas fa-user me-1\"></i>Profile\r\n      </a>\r\n      <a class=\"btn btn-outline-danger btn-sm\" href=\"/auth/login\">\r\n        <i class=\"fas fa-sign-out-alt me-1\"></i>Logout\r\n      </a>\r\n    </div>\r\n  </div>\r\n</nav>\r\n\r\n<div class=\"container-fluid\" style=\"margin-top: 80px;\">\r\n  <div class=\"row\">\r\n    <!-- Contacts List -->\r\n    <div class=\"col-md-4\" [class.d-none]=\"selectedChat\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          <h5 class=\"mb-0\">Messages</h5>\r\n        </div>\r\n        \r\n        <!-- Search Bar -->\r\n        <div class=\"card-body pb-0\">\r\n          <div class=\"input-group mb-3\">\r\n            <span class=\"input-group-text\">\r\n              <i class=\"fas fa-search\"></i>\r\n            </span>\r\n            <input type=\"text\" \r\n                   class=\"form-control\" \r\n                   placeholder=\"Search followers to chat...\" \r\n                   [(ngModel)]=\"searchQuery\" \r\n                   (input)=\"onSearchInput()\">\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"card-body pt-0\" style=\"max-height: 500px; overflow-y: auto;\">\r\n          <!-- Search Results -->\r\n          <div *ngIf=\"searchQuery.trim()\">\r\n            <div *ngIf=\"searchResults.length > 0\">\r\n              <h6 class=\"text-muted mb-3\">Search Results</h6>\r\n              <div class=\"list-group list-group-flush\">\r\n                <button class=\"list-group-item list-group-item-action border-0 rounded mb-2\" \r\n                        *ngFor=\"let user of searchResults\" \r\n                        (click)=\"startChat(user)\">\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <app-avatar [src]=\"user.profilePicture\" \r\n                                [name]=\"user.username\" \r\n                                [size]=\"40\" \r\n                                class=\"me-3\"></app-avatar>\r\n                    <div>\r\n                      <h6 class=\"mb-0\">{{user.username}}</h6>\r\n                      <small class=\"text-muted\">{{user.bio || 'Click to start chat'}}</small>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div *ngIf=\"searchResults.length === 0\" class=\"text-center text-muted py-4\">\r\n              <i class=\"fas fa-user-friends fa-2x mb-3\"></i>\r\n              <h6>No followers found</h6>\r\n              <p>No followers match \"{{searchQuery}}\"</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Existing Conversations -->\r\n          <div *ngIf=\"!searchQuery.trim()\">\r\n            <div *ngIf=\"isLoading\" class=\"text-center\">\r\n              <div class=\"spinner-border\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div *ngIf=\"!isLoading && contacts.length === 0\" class=\"text-center text-muted py-4\">\r\n              <i class=\"fas fa-comments fa-3x mb-3\"></i>\r\n              <h6>No conversations yet</h6>\r\n              <p>Search above to find followers to chat with</p>\r\n            </div>\r\n            \r\n            <div *ngIf=\"!isLoading && contacts.length > 0\">\r\n              <h6 class=\"text-muted mb-3\">Recent Conversations</h6>\r\n              <div class=\"list-group list-group-flush\">\r\n                <button class=\"list-group-item list-group-item-action border-0 rounded mb-2\" \r\n                        *ngFor=\"let contact of contacts\" \r\n                        (click)=\"selectChat(contact)\">\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <app-avatar [src]=\"contact.profilePicture || ''\" \r\n                                [name]=\"contact.username || contact\" \r\n                                [size]=\"40\" \r\n                                class=\"me-3\"></app-avatar>\r\n                    <div>\r\n                      <h6 class=\"mb-0\">{{contact.username || contact}}</h6>\r\n                      <small class=\"text-muted\">Click to open chat</small>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Chat Interface -->\r\n    <div class=\"col-md-8\" [class.col-12]=\"selectedChat\">\r\n      <div class=\"card\" *ngIf=\"selectedChat\" style=\"height: 600px;\">\r\n        <div class=\"card-header d-flex align-items-center\">\r\n          <button class=\"btn btn-outline-secondary btn-sm me-3 d-md-none\" (click)=\"backToContacts()\">\r\n            <i class=\"fas fa-arrow-left\"></i>\r\n          </button>\r\n          <app-avatar [src]=\"getSelectedContactPicture()\" \r\n                      [name]=\"selectedChat\" \r\n                      [size]=\"40\" \r\n                      class=\"me-3\"></app-avatar>\r\n          <div>\r\n            <h6 class=\"mb-0\">{{selectedChat}}</h6>\r\n            <small class=\"text-success\">\r\n              <i class=\"fas fa-circle me-1\" style=\"font-size: 0.5rem;\"></i>Online\r\n            </small>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"card-body d-flex flex-column p-0\" style=\"height: 500px;\">\r\n          <div class=\"flex-grow-1 p-3\" style=\"overflow-y: auto; background: rgba(0,0,0,0.02);\">\r\n            <div *ngFor=\"let message of messages[selectedChat]\" class=\"mb-3\">\r\n              <div [class]=\"message.senderUsername === currentUser?.username ? 'text-end' : 'text-start'\">\r\n                <div class=\"d-inline-block\" style=\"max-width: 70%;\">\r\n                  <div [class]=\"message.senderUsername === currentUser?.username ? 'bg-primary text-white' : 'bg-white'\" \r\n                       class=\"px-3 py-2 rounded-3 shadow-sm\">\r\n                    <div class=\"fw-semibold mb-1\" *ngIf=\"message.senderUsername !== currentUser?.username\">{{message.senderUsername}}</div>\r\n                    <div>{{message.content}}</div>\r\n                  </div>\r\n                  <small class=\"text-muted d-block mt-1\">{{message.timestamp | date:'short'}}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"p-3 border-top\">\r\n            <div class=\"input-group\">\r\n              <input type=\"text\" \r\n                     class=\"form-control\" \r\n                     placeholder=\"Type a message...\" \r\n                     [(ngModel)]=\"newMessage\" \r\n                     (keyup.enter)=\"sendMessage()\">\r\n              <button class=\"btn btn-primary\" \r\n                      (click)=\"sendMessage()\" \r\n                      [disabled]=\"!newMessage.trim()\">\r\n                <i class=\"fas fa-paper-plane\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"card d-flex align-items-center justify-content-center\" \r\n           *ngIf=\"!selectedChat\" \r\n           style=\"height: 600px;\">\r\n        <div class=\"text-center text-muted\">\r\n          <i class=\"fas fa-comments fa-4x mb-4\"></i>\r\n          <h4>Select a conversation</h4>\r\n          <p>Search for followers to start a new chat or choose from existing conversations</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}