{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let PostService = /*#__PURE__*/(() => {\n  class PostService {\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = 'http://localhost:8082/api/posts';\n    }\n    getPosts(page = 0, size = 10, feedType = 'universal') {\n      const params = new HttpParams().set('page', page.toString()).set('size', size.toString()).set('feedType', feedType);\n      return this.http.get(this.apiUrl, {\n        params\n      });\n    }\n    getPostById(id) {\n      return this.http.get(`${this.apiUrl}/${id}`);\n    }\n    createPost(postData) {\n      return this.http.post(this.apiUrl, postData, {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        responseType: 'text'\n      }).pipe(map(response => {\n        try {\n          return JSON.parse(response);\n        } catch (e) {\n          return {\n            success: true,\n            message: response\n          };\n        }\n      }));\n    }\n    createPostWithFile(formData) {\n      return this.http.post(`${this.apiUrl}/upload`, formData, {\n        responseType: 'text'\n      }).pipe(map(response => {\n        try {\n          return JSON.parse(response);\n        } catch (e) {\n          return {\n            success: true,\n            message: response\n          };\n        }\n      }));\n    }\n    deletePost(id) {\n      return this.http.delete(`${this.apiUrl}/${id}`);\n    }\n    likePost(id) {\n      return this.http.post(`${this.apiUrl}/${id}/like`, {});\n    }\n    unlikePost(id) {\n      return this.http.delete(`${this.apiUrl}/${id}/like`);\n    }\n    sharePost(id, userId) {\n      const params = userId ? new HttpParams().set('userId', userId.toString()) : new HttpParams();\n      return this.http.post(`${this.apiUrl}/${id}/share`, {}, {\n        params\n      });\n    }\n    toggleLike(postId) {\n      return this.http.post(`${this.apiUrl}/${postId}/toggle-like`, {});\n    }\n    addComment(postId, content) {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n      const userId = user.id || 1;\n      return this.http.post(`${this.apiUrl}/${postId}/comments?userId=${userId}`, {\n        content\n      });\n    }\n    getComments(postId) {\n      return this.http.get(`${this.apiUrl}/${postId}/comments`);\n    }\n    deleteComment(postId, commentId) {\n      return this.http.delete(`${this.apiUrl}/${postId}/comments/${commentId}`);\n    }\n    addReply(commentId, content) {\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n      const userId = user.id || 1;\n      return this.http.post(`${this.apiUrl}/comments/${commentId}/replies?userId=${userId}`, {\n        content\n      });\n    }\n    searchPosts(query) {\n      return this.http.get(`${this.apiUrl}/search?query=${encodeURIComponent(query)}`);\n    }\n    static {\n      this.ɵfac = function PostService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PostService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: PostService,\n        factory: PostService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return PostService;\n})();","map":{"version":3,"names":["HttpParams","map","PostService","constructor","http","apiUrl","getPosts","page","size","feedType","params","set","toString","get","getPostById","id","createPost","postData","post","headers","responseType","pipe","response","JSON","parse","e","success","message","createPostWithFile","formData","deletePost","delete","likePost","unlikePost","sharePost","userId","toggleLike","postId","addComment","content","user","localStorage","getItem","getComments","deleteComment","commentId","addReply","searchPosts","query","encodeURIComponent","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\acer\\Downloads\\RevHubTeam7final_2\\RevHubTeam7final\\RevHub\\frontend-mfe\\shell-app\\src\\app\\core\\services\\post.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nexport interface Post {\r\n  id: number;\r\n  content: string;\r\n  imageUrl?: string;\r\n  mediaType?: string;\r\n  author: {\r\n    id: number;\r\n    username: string;\r\n    profilePicture?: string;\r\n  };\r\n  likesCount: number;\r\n  commentsCount: number;\r\n  sharesCount: number;\r\n  createdDate: string;\r\n}\r\n\r\nexport interface PostRequest {\r\n  content: string;\r\n  imageUrl?: string;\r\n  mediaType?: string;\r\n}\r\n\r\nexport interface PageResponse<T> {\r\n  content: T[];\r\n  totalElements: number;\r\n  totalPages: number;\r\n  size: number;\r\n  number: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PostService {\r\n  private apiUrl = 'http://localhost:8082/api/posts';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getPosts(page: number = 0, size: number = 10, feedType: string = 'universal'): Observable<PageResponse<Post>> {\r\n    const params = new HttpParams()\r\n      .set('page', page.toString())\r\n      .set('size', size.toString())\r\n      .set('feedType', feedType);\r\n    return this.http.get<PageResponse<Post>>(this.apiUrl, { params });\r\n  }\r\n\r\n  getPostById(id: number): Observable<Post> {\r\n    return this.http.get<Post>(`${this.apiUrl}/${id}`);\r\n  }\r\n\r\n  createPost(postData: PostRequest): Observable<any> {\r\n    return this.http.post(this.apiUrl, postData, { \r\n      headers: { 'Content-Type': 'application/json' },\r\n      responseType: 'text'\r\n    }).pipe(\r\n      map(response => {\r\n        try {\r\n          return JSON.parse(response);\r\n        } catch (e) {\r\n          return { success: true, message: response };\r\n        }\r\n      })\r\n    );\r\n  }\r\n  \r\n  createPostWithFile(formData: FormData): Observable<any> {\r\n    return this.http.post(`${this.apiUrl}/upload`, formData, { \r\n      responseType: 'text'\r\n    }).pipe(\r\n      map(response => {\r\n        try {\r\n          return JSON.parse(response);\r\n        } catch (e) {\r\n          return { success: true, message: response };\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  deletePost(id: number): Observable<string> {\r\n    return this.http.delete<string>(`${this.apiUrl}/${id}`);\r\n  }\r\n\r\n  likePost(id: number): Observable<string> {\r\n    return this.http.post<string>(`${this.apiUrl}/${id}/like`, {});\r\n  }\r\n\r\n  unlikePost(id: number): Observable<string> {\r\n    return this.http.delete<string>(`${this.apiUrl}/${id}/like`);\r\n  }\r\n\r\n  sharePost(id: number, userId?: number): Observable<any> {\r\n    const params = userId ? new HttpParams().set('userId', userId.toString()) : new HttpParams();\r\n    return this.http.post(`${this.apiUrl}/${id}/share`, {}, { params });\r\n  }\r\n\r\n  toggleLike(postId: number): Observable<any> {\r\n    return this.http.post(`${this.apiUrl}/${postId}/toggle-like`, {});\r\n  }\r\n\r\n  addComment(postId: number, content: string): Observable<any> {\r\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n    const userId = user.id || 1;\r\n    return this.http.post(`${this.apiUrl}/${postId}/comments?userId=${userId}`, { content });\r\n  }\r\n\r\n  getComments(postId: number): Observable<any[]> {\r\n    return this.http.get<any[]>(`${this.apiUrl}/${postId}/comments`);\r\n  }\r\n\r\n  deleteComment(postId: number, commentId: number): Observable<any> {\r\n    return this.http.delete(`${this.apiUrl}/${postId}/comments/${commentId}`);\r\n  }\r\n\r\n  addReply(commentId: number, content: string): Observable<any> {\r\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n    const userId = user.id || 1;\r\n    return this.http.post(`${this.apiUrl}/comments/${commentId}/replies?userId=${userId}`, { content });\r\n  }\r\n  \r\n  searchPosts(query: string): Observable<Post[]> {\r\n    return this.http.get<Post[]>(`${this.apiUrl}/search?query=${encodeURIComponent(query)}`);\r\n  }\r\n}\r\n\r\nexport interface Comment {\r\n  id: number;\r\n  content: string;\r\n  author: {\r\n    id: number;\r\n    username: string;\r\n    profilePicture?: string;\r\n  };\r\n  createdDate: string;\r\n  replies?: Comment[];\r\n  parentComment?: Comment;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}