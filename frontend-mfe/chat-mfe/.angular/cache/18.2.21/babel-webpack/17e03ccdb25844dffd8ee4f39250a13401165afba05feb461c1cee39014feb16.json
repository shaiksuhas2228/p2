{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ChatService = /*#__PURE__*/(() => {\n  class ChatService {\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = 'http://localhost:8080/chat';\n    }\n    sendMessage(receiverUsername, content) {\n      const token = localStorage.getItem('revhub_token');\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      return this.http.post(`${this.apiUrl}/send`, {\n        receiverUsername,\n        content\n      }, {\n        headers\n      });\n    }\n    getConversation(username) {\n      const token = localStorage.getItem('revhub_token');\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      return this.http.get(`${this.apiUrl}/conversation/${username}`, {\n        headers\n      });\n    }\n    markAsRead(username) {\n      const token = localStorage.getItem('revhub_token');\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      return this.http.post(`${this.apiUrl}/mark-read/${username}`, {}, {\n        headers\n      });\n    }\n    getChatContacts() {\n      const token = localStorage.getItem('revhub_token');\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      return this.http.get(`${this.apiUrl}/contacts`, {\n        headers\n      });\n    }\n    getUnreadCount(username) {\n      const token = localStorage.getItem('revhub_token');\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      return this.http.get(`${this.apiUrl}/unread-count/${username}`, {\n        headers\n      });\n    }\n    static {\n      this.ɵfac = function ChatService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ChatService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ChatService,\n        factory: ChatService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ChatService;\n})();","map":{"version":3,"names":["HttpHeaders","ChatService","constructor","http","apiUrl","sendMessage","receiverUsername","content","token","localStorage","getItem","headers","set","post","getConversation","username","get","markAsRead","getChatContacts","getUnreadCount","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\acer\\Downloads\\RevHubTeam7final_2\\RevHubTeam7final\\RevHub\\frontend-mfe\\chat-mfe\\src\\app\\services\\chat.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nexport interface ChatMessage {\n  id: string;\n  senderId: string;\n  senderUsername: string;\n  receiverId: string;\n  receiverUsername: string;\n  content: string;\n  timestamp: string;\n  read: boolean;\n  messageType: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChatService {\n  private apiUrl = 'http://localhost:8080/chat';\n\n  constructor(private http: HttpClient) { }\n\n  sendMessage(receiverUsername: string, content: string): Observable<ChatMessage> {\n    const token = localStorage.getItem('revhub_token');\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    \n    return this.http.post<ChatMessage>(`${this.apiUrl}/send`, {\n      receiverUsername,\n      content\n    }, { headers });\n  }\n\n  getConversation(username: string): Observable<ChatMessage[]> {\n    const token = localStorage.getItem('revhub_token');\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    \n    return this.http.get<ChatMessage[]>(`${this.apiUrl}/conversation/${username}`, { headers });\n  }\n\n  markAsRead(username: string): Observable<string> {\n    const token = localStorage.getItem('revhub_token');\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    \n    return this.http.post<string>(`${this.apiUrl}/mark-read/${username}`, {}, { headers });\n  }\n\n  getChatContacts(): Observable<string[]> {\n    const token = localStorage.getItem('revhub_token');\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    \n    return this.http.get<string[]>(`${this.apiUrl}/contacts`, { headers });\n  }\n\n  getUnreadCount(username: string): Observable<number> {\n    const token = localStorage.getItem('revhub_token');\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    \n    return this.http.get<number>(`${this.apiUrl}/unread-count/${username}`, { headers });\n  }\n}\n"],"mappings":"AACA,SAAqBA,WAAW,QAAQ,sBAAsB;;;AAkB9D,WAAaC,WAAW;EAAlB,MAAOA,WAAW;IAGtBC,YAAoBC,IAAgB;MAAhB,KAAAA,IAAI,GAAJA,IAAI;MAFhB,KAAAC,MAAM,GAAG,4BAA4B;IAEL;IAExCC,WAAWA,CAACC,gBAAwB,EAAEC,OAAe;MACnD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MAClD,MAAMC,OAAO,GAAG,IAAIX,WAAW,EAAE,CAACY,GAAG,CAAC,eAAe,EAAE,UAAUJ,KAAK,EAAE,CAAC;MAEzE,OAAO,IAAI,CAACL,IAAI,CAACU,IAAI,CAAc,GAAG,IAAI,CAACT,MAAM,OAAO,EAAE;QACxDE,gBAAgB;QAChBC;OACD,EAAE;QAAEI;MAAO,CAAE,CAAC;IACjB;IAEAG,eAAeA,CAACC,QAAgB;MAC9B,MAAMP,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MAClD,MAAMC,OAAO,GAAG,IAAIX,WAAW,EAAE,CAACY,GAAG,CAAC,eAAe,EAAE,UAAUJ,KAAK,EAAE,CAAC;MAEzE,OAAO,IAAI,CAACL,IAAI,CAACa,GAAG,CAAgB,GAAG,IAAI,CAACZ,MAAM,iBAAiBW,QAAQ,EAAE,EAAE;QAAEJ;MAAO,CAAE,CAAC;IAC7F;IAEAM,UAAUA,CAACF,QAAgB;MACzB,MAAMP,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MAClD,MAAMC,OAAO,GAAG,IAAIX,WAAW,EAAE,CAACY,GAAG,CAAC,eAAe,EAAE,UAAUJ,KAAK,EAAE,CAAC;MAEzE,OAAO,IAAI,CAACL,IAAI,CAACU,IAAI,CAAS,GAAG,IAAI,CAACT,MAAM,cAAcW,QAAQ,EAAE,EAAE,EAAE,EAAE;QAAEJ;MAAO,CAAE,CAAC;IACxF;IAEAO,eAAeA,CAAA;MACb,MAAMV,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MAClD,MAAMC,OAAO,GAAG,IAAIX,WAAW,EAAE,CAACY,GAAG,CAAC,eAAe,EAAE,UAAUJ,KAAK,EAAE,CAAC;MAEzE,OAAO,IAAI,CAACL,IAAI,CAACa,GAAG,CAAW,GAAG,IAAI,CAACZ,MAAM,WAAW,EAAE;QAAEO;MAAO,CAAE,CAAC;IACxE;IAEAQ,cAAcA,CAACJ,QAAgB;MAC7B,MAAMP,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MAClD,MAAMC,OAAO,GAAG,IAAIX,WAAW,EAAE,CAACY,GAAG,CAAC,eAAe,EAAE,UAAUJ,KAAK,EAAE,CAAC;MAEzE,OAAO,IAAI,CAACL,IAAI,CAACa,GAAG,CAAS,GAAG,IAAI,CAACZ,MAAM,iBAAiBW,QAAQ,EAAE,EAAE;QAAEJ;MAAO,CAAE,CAAC;IACtF;;;yCAzCWV,WAAW,EAAAmB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;MAAA;IAAA;;;eAAXtB,WAAW;QAAAuB,OAAA,EAAXvB,WAAW,CAAAwB,IAAA;QAAAC,UAAA,EAFV;MAAM;IAAA;;SAEPzB,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}